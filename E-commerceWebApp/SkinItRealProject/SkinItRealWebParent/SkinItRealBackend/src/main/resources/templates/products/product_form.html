<!DOCTYPE html>
<html xmlns:th="http://www.thymeLeaf.org">
<head th:replace="fragments :: page_head('Brands - SkinItReal Admin')"/>
<title>[[${pageTitle}]]</title>
<body>
<div class="container-fluid">
<div th:replace="navigation :: menu"></div>
<div><h3 style="color:#af5175">Add new product</h3></div>
<form th:action="@{/products/save}" method="post"
	enctype="multipart/form-data"
	th:object="${product}" >
	<div>
	<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active"  data-toggle="tab" href="#overview" role="tab" >Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#description" role="tab" >Description</a>
  </li>
  <li class="nav-item">
    <a class="nav-link"  data-toggle="tab" href="#images" role="tab" >Images</a>
  </li>
  <li class="nav-item">
    <a class="nav-link"  data-toggle="tab" href="#details" role="tab" >Details</a>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active p-3" id="overview" role="tabpanel" >
  <div th:replace="products/product_overview::content"></div></div>
  <div class="tab-pane" id="description" role="tabpanel" >
  <div th:replace="products/product_description::content">
  </div></div>
  <div class="tab-pane active p-3 ml-3" id="images" role="tabpanel" >
	<div><label>Main Image:</label></div>
				<div class="m-2">
					<img id="thumbnail" alt="Main image preview" class="img-fluid"
						th:src="@{${product.mainImagePath}}"/>
				</div>
				<div>
					<input type="file" id="fileImage" name="fileImage" required
					accept="image/png,image/jpeg"/>
				</div>
  </div>
  
  <div class="tab-pane" id="details" role="tabpanel" >Details</div>
  
</div>
</div>
<div class="text-center">
			<input type="submit" value="Save" class="btn btn-primary m-3" />
			<input type="button" value="Cancel" class="btn btn-secondary" id="buttonCancel" />
		</div>
</form>


<div th:replace="modal_fragments::modal-dialog"></div>


<div class="text-center">
<p>SkinItReal Control Pane - Copyright &copy; SkinItReal</p>
</div>
</div>
<script type="text/javascript">

	
</script>
<script type="text/javascript">
MAX_FILE_SIZE=102400;
moduleURL = "[[@{/products}]]";
brandModuleURL="[[@{/brands}]]";
dropdownBrands=$("#brand");
dropdownCategories=$("#category");

$(document).ready(function(){
	dropdownBrands.change(function(){
		dropdownCategories.empty();
		getCategories();
	});
	getCategories();
});
function getCategories(){
	brandId=dropdownBrands.val();
	url=brandModuleURL+"/"+brandId+"/categories";
	
	$.get(url,function(responseJson){
		$.each(responseJson,function(index,category){
			$("<option>").val(category.id).text(category.name).appendTo(dropdownCategories);
		});
	});
	
	
}

</script>
<script th:src="@{/js/common_form.js}"></script>
</body>

</html>